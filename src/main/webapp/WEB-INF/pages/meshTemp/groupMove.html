<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" th:href="@{/static/css/base.css}">
    <link rel="stylesheet" th:href="@{/static/css/leftNav.css}">
    <link rel="stylesheet" th:href="@{/static/css/mesh.css}">
    <title>组移动</title>
</head>

<body>
<div th:replace="common/head::head"></div>
<div class="c-container">
    <div th:replace="common/left::left"></div>
    <div class="main-right">
        <div class="clearfix main-right-nav">
            <div class="f-l main-right-title">组移动</div>
            <div class="f-r pointer">
                <img src="/alink-hq/static/img/go-back.png" alt="" onclick="history.back()">
            </div>
        </div>
        <form th:action="@{/group/saveUpdate}" class="" method="post">
            <div id="meshTurnOver">
                <div class="f-nav">
                    组移动
                </div>
                <div class="f-content">
                    <input type="hidden" name="gids" th:value="${ids}">
                    <div class="accountMsg clearfix" th:each="group:${groupMap}">
                        <div class="f-l mesh-name">
                            <span th:text="${group.gname}"></span>
                        </div>
                        <div class="f-l  mesh-id">
                            <label for="mid">网络ID：</label>
                            <input type="text" id="mid" th:value="${group.mesh_id}">
                        </div>
                        <div class="f-l mesh-project">
                            <label for="project">属于区域：</label>
                            <input type="text" id="project" th:value="${group.pname}">
                        </div>
                    </div>
                </div>
                <div class="" style="text-align: center;    margin-bottom: 30px;">
                    <img src="/alink-hq/static/img/exchange-un.png" alt="">
                </div>
                <div class="transfer-company">
                    <label for="pid"><span>*</span>选择移动到的区域：</label>
                    <select name="pid" id="pid">
                        <option value="0">区域1</option>
                    </select>
                </div>
                <div class="tranfer-btn">
                    <button class="confirm-btn" type="submit">确定移交</button>
                </div>
            </div>
        </form>
    </div>
</div>
<script src="/alink-hq/static/js/jquery.min.js"></script>
<script th:inline="javascript">
    var uid = [[${session.user.id}]];
    $(function () {
       console.log("pid="+$("#pid option:selected").val()) ;
        $.getJSON("/alink-hq/group/getPlace", {"uid": uid}, function (json) {
            if(json!=''){
                $("#pid option:first").remove();
            }
            // 下面使用each进行遍历
            $.each(json, function (i, item) {
                $("#pid").append("<option value='" + item.id + "'>" + item.label + "</option>");
            });
        });
        $('.one-list li').each(function () {
            $('.main-left>ul>li.one-list:eq(0)').find('.on-off-triangle').attr('src', '/alink-hq/static/img/right-triange-un.png');
            $('.main-left>ul>li.one-list:eq(0)').find('.two-list').addClass('active');
            var tab = $(this).attr('tab');
            if (tab == 'meshList') {
                $(this).addClass('active').siblings().removeClass('active');
            }
        });
        $('.on-off-triangle').click(function () {
            var imgUrl = $(this).attr('src');
            if (imgUrl == '/alink-hq/static/img/bottom-triangle-un.png') {
                $(this).attr('src', '/alink-hq/static/img/right-triange-un.png');
                $(this).parent().parent('.one-list').find('.two-list').addClass('active');
            } else {
                $(this).attr('src', '/alink-hq/static/img/bottom-triangle-un.png');
                $(this).parent().parent('.one-list').find('.two-list').removeClass('active');
            }
        })
    });

</script>
</body>
</html>