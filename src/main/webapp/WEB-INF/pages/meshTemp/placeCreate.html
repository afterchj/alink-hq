<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <script src="/alink-hq/static/js/browser.js"></script>
    <link rel="stylesheet" href="/alink-hq/static/css/base.css"/>
    <link rel="stylesheet" href="/alink-hq/static/css/leftNav.css"/>
    <link rel="stylesheet" href="/alink-hq/static/css/loding.css"/>
    <link rel="stylesheet" href="/alink-hq/static/css/projectManage.css"/>
    <link rel="stylesheet" th:href="@{/static/css/laydate.css}"/>
    <title>创建区域</title>
</head>
<body>

<div class="c-container">
    <div th:replace="common/head::head"></div>
    <div class="main clearfix">
        <div th:replace="common/left::left('placeList')"></div>
        <div class="main-right f-l">
            <div class="clearfix main-right-nav">
                <div class="f-l main-right-title">创建区域</div>
                <!--<div class="f-r pointer">-->
                <!--<img src="/alink-hq/static/img/create-project.png" alt="">-->
                <!--</div>-->
                <div class="f-r pointer">
                    <div class="goBack" onClick="javascript :history.back();" onmousedown="backBtnMouseDown()"
                         onmouseup="backBtnMouseUp()">
                        <span><</span><span>返回</span>
                    </div>
                    <!--<img src="/alink-hq/static/img/go-back.png" alt="" onclick="history.back()">-->
                </div>
            </div>
            <div id="createProject" class="table-content-list">
                <div class="c-createProject">
                    <div class="c-nav">
                        创建区域
                    </div>
                    <div class="c-content ">
                        <div class="subjection">隶属项目：<span th:inline="text">[[${project.label}]]</span></div>
                        <form th:action="@{/group/save}" method="GET" style="margin-top: 0;">
                            <div class="process clearfix">
                                <div class="f-l part">
                                    <img src="/alink-hq/static/img/fill-1-on.png" alt="">
                                    <span>选择网络</span>
                                </div>
                                <div class="f-l part  line ">……</div>
                                <div class="f-l part">
                                    <img src="/alink-hq/static/img/fill-3-no.png" alt="">
                                    <span>输入名称</span>
                                </div>
                            </div>
                            <div>
                                <p class="project-hint"></p>
                                <label for="mid">选择网络：</label>
                                <select id="mid" name="mid" style="height:35px;">
                                    <option value="">请选择网络</option>
                                </select>
                            </div>
                            <div>
                                <p class="" style="height: 20px"></p>
                                <label for="meshId">网络ID：</label>
                                <input type="text" id="meshId" readonly>
                            </div>
                            <div class="">
                                <button type="button" class="confirm-create" openTab="confirm-create">下一步</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="preload-anim">
    <div id="circularG">
        <div id="circularG_1" class="circularG"></div>
        <div id="circularG_2" class="circularG"></div>
        <div id="circularG_3" class="circularG"></div>
        <div id="circularG_4" class="circularG"></div>
        <div id="circularG_5" class="circularG"></div>
        <div id="circularG_6" class="circularG"></div>
        <div id="circularG_7" class="circularG"></div>
        <div id="circularG_8" class="circularG"></div>
    </div>
    <p class="title"></p>
</div>
<script type="text/javascript" src="/alink-hq/static/js/jquery.min.js"></script>
<script type="text/javascript" src="/alink-hq/static/js/left.js"></script>
<script src="/alink-hq/static/js/moment.js"></script>
<script th:inline="javascript">
    var projectId = [[${dict.projectId}]];
    $(function () {
        $.getJSON("/alink-hq/group/getMesh", {"projectId": projectId}, function (json) {
            if (json != '') {
                $("#mid option:first").siblings().remove();
            }
            // 下面使用each进行遍历
            $.each(json, function (i, item) {
                $("#mid").append("<option value='" + item.id + "'>" + item.label + "</option>");
            });
            var str = $("#mid option:selected").val();
            $("#meshId").val(str.substr(0, str.indexOf("_")));
            $("#mid").change(function () {
                var mid = $("#mid option:selected").val();
                if (mid == '') {
                    $('.project-hint').text('请选择网络');
                } else {
                    $('.project-hint').text('');
                }
                var meshId = mid.substr(mid.indexOf("_") + 1);
                console.log("mid=" + mid + ",meshId=" + meshId);
                $("#meshId").val(meshId);
            });
        });
    });
    $('.confirm-create').click(function () {
        var mid = $("#mid option:selected").val();
        if (mid == '') {
            $('.project-hint').text('请选择网络');
        } else {
            $('.project-hint').text('');
        }
    })
    //监听网络选择
    //    $('#mid').change(function(){
    //        var mid = $('#pid option:selected').val();
    //        if(mid==''){
    //            $('.project-hint').text('请选择网络');
    //        }else{
    //            $('.project-hint').text('');
    //        }
    //    })
</script>
</body>
</html>