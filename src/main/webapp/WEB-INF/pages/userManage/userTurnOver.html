<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" th:href="@{/static/css/base.css}">
    <link rel="stylesheet" th:href="@{/static/css/leftNav.css}">
    <link rel="stylesheet" th:href="@{/static/css/userManage.css}">
    <title>移交账号</title>
</head>

<body>
<div th:replace="common/head::head"></div>
<div class="c-container">
    <div th:replace="common/left::left"></div>
    <div class="main-right">
        <div class="clearfix main-right-nav">
            <div class="f-l main-right-title">账号移交</div>
            <div class="f-r pointer">
                <img src="/alink-hq/static/img/go-back.png" alt="" onClick="javascript :history.back(-1);"/>
            </div>
        </div>
        <div id="userTurnOver">
            <div class="f-userTurnOver">
                <div class="f-nav">
                    移交账号
                </div>
                <div class="f-content scrollbar">
                    <form action="" class=" ">
                        <div class="accountMsg clearfix">
                            <div class="f-l">
                                <label for="account">账号：</label>
                                <input type="text" id="account" th:value="${account}">
                            </div>
                            <div class="f-l">
                                <label for="company">隶属公司：</label>
                                <input type="text" id="company" th:value="${coname}">
                            </div>
                        </div>
                        <div class="img-exchange">
                            <img src="/alink-hq/static/img/exchange-un.png" alt="">
                        </div>
                        <div class="transfer">
                            <div class="transfer-company">
                                <p class="tranfer-company-hint"></p>
                                <label for=""><span style="">*</span>选择移交到的公司：</label>
                                <select name="transfer-company" id="transfer-company" class="pointer">
                                    <option value="">请选择公司</option>
                                    <option th:each="firm:${firmList}" th:value="${firm.id}"
                                            th:text="${firm.coname }"></option>
                                </select>
                            </div>
                            <div class="attention">
                                <p><span style="color: red;">注意！</span><span>确认移交后</span></p>
                                <ul>
                                    <li>（1）账号中的项目保持不变；</li>
                                    <li>（2）该账号的用户名，绑定的手机号码及邮箱均会清空；</li>
                                    <li>（3）密码将会重置。</li>
                                </ul>
                            </div>
                        </div>

                        <div class="btn-transfer">
                            <button type="button">确定移交</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!--重置密码 -->

<div class="reset-passwords pop-iframe" openContent="">
    <div class="reset-passwords-nav p-r pop-nav">
        新密码
    </div>
    <div class="reset-passwords-content pop-content">
        <form action="">
            <div class="main-part">
                <div class="account-part">
                    <span class="t-title t-account">账&nbsp;&nbsp;&nbsp;号：</span>
                    <span class="t-content t-account-result"></span>
                </div>
                <div class="pwd-part">
                    <span class="t-title t-pwd">新密码：</span>
                    <span class="t-content t-pwd-result"></span>
                </div>
            </div>

            <div class="pop-btn clearfix">
                <div class="f-l pop-hint">请牢记新密码，关闭后将无法展示</div>
                <div class="f-r">
                    <button class="reduce" type="button">取消</button>
                    <button class="yes" type="button">确定</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="success ">
    <div style="margin-bottom: 20px;"><img src="/alink-hq/static/img/success.png" alt=""></div>
    <div><img src="/alink-hq/static/img/sucessfont.png" alt=""></div>

</div>
<div class="hide-iframe "></div>
<script src="/alink-hq/static/js/jquery.min.js"></script>
<script>
    $(function () {
        $('.one-list li').each(function () {
            $('.main-left>ul>li.one-list:eq(1)').find('.on-off-triangle').attr('src', '/alink-hq/static/img/right-triange-un.png');
            $('.main-left>ul>li.one-list:eq(1)').find('.two-list').addClass('active');
            var tab = $(this).attr('tab');
            if (tab == 'userList') {
                $(this).addClass('active').siblings().removeClass('active');
            }
        })
    })
    $('.on-off-triangle').click(function () {
        var imgUrl = $(this).attr('src');
        if (imgUrl == '/alink-hq/static/img/bottom-triangle-un.png') {
            $(this).attr('src', '/alink-hq/static/img/right-triange-un.png');
            $(this).parent().parent('.one-list').find('.two-list').addClass('active');
        } else {
            $(this).attr('src', '/alink-hq/static/img/bottom-triangle-un.png');
            $(this).parent().parent('.one-list').find('.two-list').removeClass('active');
        }
    })
    $('.btn-transfer button').click(function () {
        var account = $("#account").val();
        var fid = $("#transfer-company option:selected").val();
        if(fid==''){
            $('p.tranfer-company-hint').text('请选择公司');
        }else{
            $('p.tranfer-company-hint').text('');
            $.ajax({
                type: "POST",
                url: "/alink-hq/account/transfer",
                data: {account: account, fid: fid},
                dataType: "json",
                success: function (res) {
                    console.log(res);
                    if (res.result == '000') {
                        $('.pop-iframe').addClass('active');
                        var width = document.body.scrollWidth;
                        var height = document.body.scrollHeight;
                        $('.hide-iframe').addClass('active');
                        $('.hide-iframe').css({
                            'width': width,
                            'height': height
                        })
                        var pwd=res.pwd;
                        var account=res.account;
                        $('.t-account-result').text(account);
                        $('.t-pwd-result').text(pwd);
                    }
                }
            });
        }

    })
    $('.reset-passwords-content button.yes').click(function(){
        $('.hide-iframe').addClass('active');
        $('.pop-iframe').removeClass('active');
        $('.success').addClass('active');
        setInterval(function(){
            window.location.href='/alink-hq/account/list';
        },1000)
    })

    //监听公司选择
    $('#transfer-company').change(function(){
        var selected=$(this).children('option:selected').val();
        if(selected==''){
            $('p.tranfer-company-hint').text('请选择公司');
        }else{
            $('p.tranfer-company-hint').text('');
        }
    })

    function hide() {
        $('.hide-iframe').removeClass('active');
        $('.pop-iframe').removeClass('active');
    }

    $('.close').click(function () {
        hide();
    })
    // 点击取消时
    $('.pop-content  .pop-btn .reduce').click(function () {
        hide();
        $(this).parents('.pop-iframe').removeClass('active');
    })
    $(function(){
        var height=$(document).height();
        $('.main-left').css('height',height);
    })
</script>
</body>

</html>